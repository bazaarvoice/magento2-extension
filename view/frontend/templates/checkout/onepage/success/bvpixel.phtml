<?php
/**
 * Copyright Â© Bazaarvoice, Inc. All rights reserved.
 * See LICENSE.md for license details.
 */
?>

<?php /** @var Magento\Framework\View\Element\Template $block */ ?>
<?php /** @var Bazaarvoice\Connector\ViewModel\Pixel $viewModel */ ?>
<?php $viewModel = $block->getViewModel(); ?>

<?php if ($viewModel->getBvPixelEnabled()): ?>
    <!-- <?= $escaper->escapeHtml($viewModel->getExtensionInjectionMessage()); ?> -->
    <?php if ($viewModel->canShowDebugDetails()): ?>
        <!--<?= $escaper->escapeHtml($viewModel->getDebugDetails()); ?>-->
    <?php endif; ?>
    <script type="text/javascript">
        var transactionData = <?= $escaper->escapeHtml($viewModel->getJsonOrderDetails()); ?>;
        window.bvCallback = function (BV) {
            BV.pixel.trackTransaction(transactionData);
        }
    </script>
<?php endif; ?>
